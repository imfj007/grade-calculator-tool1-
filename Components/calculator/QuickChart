import React from "react";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
import { BarChart3 } from "lucide-react";

export default function QuickChart({ totalQuestions, showDecimals, gradingScale }) {
  const generateChartData = () => {
    const data = [];
    for (let wrong = 0; wrong <= Math.min(totalQuestions, 20); wrong++) {
      const correct = totalQuestions - wrong;
      const percentage = totalQuestions > 0 ? (correct / totalQuestions) * 100 : 0;
      const displayPercentage = showDecimals 
        ? percentage.toFixed(2) 
        : Math.round(percentage);
      
      const getGradeColor = (perc) => {
        if (perc >= 85) return 'text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/20';
        if (perc >= 70) return 'text-amber-600 bg-amber-50 dark:text-amber-400 dark:bg-amber-900/20';
        return 'text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20';
      };

      const getLetterGrade = (perc) => {
        if (gradingScale.type !== 'letter') return null;
        const grade = gradingScale.scale.find(s => perc >= s.min && perc <= s.max);
        return grade ? grade.grade : 'F';
      };

      data.push({
        wrong,
        correct,
        percentage: displayPercentage,
        letterGrade: getLetterGrade(percentage),
        colorClass: getGradeColor(percentage)
      });
    }
    return data;
  };

  const chartData = generateChartData();

  return (
    <Card className="shadow-lg border-0 bg-card/60 backdrop-blur-sm">
      <CardHeader className="pb-4">
        <CardTitle className="flex items-center gap-2 text-lg">
          <BarChart3 className="w-5 h-5" />
